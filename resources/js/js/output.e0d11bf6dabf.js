(function($){$.extend({add2cart:function(source_id,target_id,callback){var source=$('#'+source_id);var target=$('#'+target_id);var display_image=$('#'+source_id).attr('src');var shadow=$('#'+source_id+'_shadow');if(!shadow.attr('id')){$('body').prepend('<div id="'+source.attr('id')+'_shadow" style="display: none; background-color: #ddd; border: solid 1px darkgray; position: static; top: 0px; z-index:100000"><img src="'+display_image+'" /></div>');var shadow=$('#'+source.attr('id')+'_shadow');}
if(!shadow){alert('Cannot create the shadow div');}
shadow.width(source.css('width')).height(source.css('height')).css('top',source.offset().top).css('left',source.offset().left).css('opacity',0.5).show();shadow.css('position','absolute');shadow.animate({top:target.offset().top,left:target.offset().left},300,'linear').animate({opacity:0},100,function(){shadow.hide();}).animate({opacity:0},{duration:0,complete:callback});}});})(jQuery);;$(document).ready(function(){$('.brochure_select').each(function(event){var id=parseInt(this.id.replace('id_',''));if($(this).is(':checked')){$('#brox_'+id).addClass('ordered');$('.place-order').show();}});$('.brochure-quantity').html(get_brochure_order_quantity());var curr_sel=$('#id_province').val();$('#id_province').html('');$('#brox_details_form').show();function update_provinces(){var country_id=$('#id_country').val();if(!country_id){country_id='';}
$.getJSON('/geography/states?country='+country_id,function(data){var options='';if(data.length>0){options+='<option value="">------</option>';}
for(var i=0;i<data.length;i++){options+="<option value='"+data[i]['pk']+"' ";if(data[i]['pk']==curr_sel)
options+=" selected "
options+=">"+data[i]['fields']['name']+"</option>";}
$('#id_province').html(options);});}
update_provinces();$('#id_country').change(function(e){update_provinces();});$('.brochure_select_unique').each(function(){var id=parseInt(this.id.replace('id_',''));if($(this).is(':checked')){$('#id_unique_status_'+id).show();}
else{$('#id_unique_status_'+id).hide();}});$('.brochure_select_unique').click(function(event){var id=parseInt(this.id.replace('id_',''));$('#id_unique_status_'+id).toggle();$('.brochure_select:not(.brochure_select_always_allowed)').each(function(){var tmp_id=parseInt(this.id.replace('id_',''));if(id!=tmp_id)
{$(this).attr("disabled",!$(this).attr("disabled"));$(this).parent().toggleClass('disabled');}});});$('.brochureSelect').click(function(event){var brox_id=parseInt(this.id.replace('brox_',''));var checkbox_elem_id="#id_"+brox_id+"-selected";if($(this).hasClass('ordered')){$(this).removeClass('ordered');$(checkbox_elem_id).prop("checked",false);if(get_brochure_order_quantity()==0){$('.place-order').hide()}}
else{$(this).addClass('ordered');$(checkbox_elem_id).prop("checked",true);$('.place-order').show();}
$('.brochure-quantity').html(get_brochure_order_quantity());});function get_brochure_order_quantity(){return $('.brochure_select:checked').length;}});;