function Geography(country_ajax_url,province_ajax_url,options){var self=this;options=options||{};this.country_ajax_url=country_ajax_url;this.province_ajax_url=province_ajax_url;this.country_input_id=options.country_input_id||'#id_country';this.province_control=options.province_control||"#row_province, #row_state";this.province_input_id=options.province_input_id||'#id_province, #id_state';this.$country=$(this.country_input_id);this.$province_control=$(this.province_control);this.$province_control.hide();this.load_provinces=function(country_id){$.getJSON(self.province_ajax_url,{'country':country_id},function(data,textStatus,jqXHR){var $province=$(self.province_input_id);if(data.length>0){self.$province_control.show();}else{self.$province_control.hide();}
var selected=$province.val();$province.html('');$province.append(new Option('------',''));$(data).each(function(index,obj){$province.append(new Option(obj.fields.name,obj.pk));});$province.val(selected);});};this.load_countries=function(){$.getJSON(this.country_ajax_url,{},function(data,textStatus,jqXHR){self.$country.html('');self.$country.append(new Option('------',''));$(data).each(function(index,obj){self.$country.append(new Option(obj.fields.name,obj.pk));});});};var c_id=this.$country.val();self.load_provinces(c_id);this.$country.change(function(event){var c_id=self.$country.val();self.load_provinces(c_id);});};$(document).ready(function(){var geography=new Geography('/geography/countries','/geography/states',{province_control:"#div_id_province"});$("#id_contact_type").on('change',function(event){if($(this).val()==='7'||$(this).val()==='4'){$("#hint_id_topic").css('display','block')}else{$("#hint_id_topic").css('display','none')}})});;