;(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this);}});function unveil(){var inview=images.filter(function(){var $e=$(this),wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th;});loaded=inview.trigger("unveil");images=images.not(loaded);}$w.scroll(unveil);$w.resize(unveil);unveil();return this;};})(window.jQuery||window.Zepto);;$.expr[':'].active=function(obj){return $(obj).css('display')!=='none';};$.expr[':'].inactive=function(obj){return $(obj).css('display')==='none';};;!function($,_){'use strict';var FacetedTile=function(element,deferred,options){this.init(element,deferred,options);};FacetedTile.prototype={constructor:FacetedTile,init:function(element,deferred,options){var that=this;var $doc=$(document);this.options=options||{};this.meta=this.options.meta||undefined;this.$el=$(element);this.$metas=this.$el.find('[data-meta-field]');this.$tileImage=this.$el.find('.trip-tile-image');this.$banner=this.$tileImage.find('.trip-tile-banner');this.$map=this.$tileImage.find('.trip-tile-map');this.images={map:this.$map,banner:this.$banner};this.initCountryPopovers();this.initMetaPopovers();$doc.click(function(evt){that.hidePopovers();});this.initUnveil(this.options.currentView);deferred.resolve();},initUnveil:function(imageType){var $img=this.images[imageType];if(!$img.data('unveiled')){$img.find('img').unveil(this.options.lazyLoadThreshold,null,$(".snap-content").get()[0]);$img.data('unveiled',true);}},initMetaPopovers:function(){var that=this;if(!this.meta){return;}
this.$metas.each(function(){var $this=$(this);var data=$this.data();if(data.metaField&&data.metaValue){var metaFieldData=that.meta[data.metaField];if(_.isNumber(data.metaValue)){data.metaValue=data.metaValue.toString();}
if(metaFieldData){var meta=_.find(metaFieldData,{'name':data.metaValue});var placement=data.place||$.fn.facetedTile.popoverDefaults.placement;if(meta){if(data.place){placement=data.place;}
$this.css('cursor','pointer');$this.popover(_.extend({},$.fn.facetedTile.popoverDefaults,{placement:placement,title:data.metaValue,content:meta.description})).click($.proxy(that.showPopover,that));}
else{$this.click(function(){return false;});}}}});},initCountryPopovers:function(){var that=this;$('.countries-visited').each(function(){var $info=$(this).children('a.info').first();if($info.length>0){var countryData=$(this).data('countriesVisited');var countries=JSON.parse(countryData.replace(/\'/g,'"'));if(countries){$info.each(function(){that.$el.find(this).popover(_.extend($.fn.facetedTile.popoverDefaults,{placement:"top",content:countries.join(', ')})).click($.proxy(that.showPopover,that));});}}});},showPopover:function(evt){var $el=$(evt.target);var visible=$el.hasClass('popover-visible');evt.stopPropagation();evt.preventDefault();this.hidePopovers();if(!visible){$el.popover('show');$el.addClass('popover-visible');}
return false;},hidePopovers:function(){var $popovers=$('.popover-visible');$popovers.each(function(evt){$(this).removeClass('popover-visible');$(this).popover('hide');});}};$.fn.facetedTile=function(option){var dfd=$.Deferred();this.each(function(){var $this=$(this);var data=$this.data('facetedTile');var options=typeof option=='object'&&option;if(!data){$this.data('facetedTile',(data=new FacetedTile(this,dfd,options)));}else{dfd.resolve();}});return dfd.promise();};$.fn.facetedTile.Constructor=FacetedTile;$.fn.facetedTile.popoverDefaults={container:'body',html:true,trigger:'manual',placement:'left'};}(window.jQuery,window._);;var riloadr=null;$(function(){riloadr=new Riloadr({root:'container',name:'responsive',defer:{mode:'belowfold'},ignoreLowBandwidth:false,oncomplete:function(){},onerror:function(){},retries:1,breakpoints:[{name:'small',maxWidth:340},{name:'medium',minWidth:340,maxWidth:657,minDevicePixelRatio:2},{name:'medium',minWidth:341,maxWidth:959},{name:'large',minWidth:658,maxWidth:959,minDevicePixelRatio:2},{name:'large',minWidth:960,maxWidth:1400},{name:'xlarge',minWidth:960,minDevicePixelRatio:2},{name:'xlarge',minWidth:1401}],watchViewportWidth:'*'});});;var tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var videoPlayers=document.querySelectorAll("iframe.video-player");var player;var playerId;function onYouTubeIframeAPIReady(){for(var i=0;i<videoPlayers.length;i++){playerId=videoPlayers[i].getAttribute("id");if(playerId){player=new YT.Player(playerId,{events:{'onStateChange':onPlayerStateChange}});}}}
function onPlayerStateChange(newState){if(typeof heap!=="undefined"){if(newState.data==YT.PlayerState.PLAYING){heap.track('Video Playing');}else if(newState.data==YT.PlayerState.ENDED){heap.track('Video Finished');}else if(newState.data==YT.PlayerState.PAUSED){heap.track('Video Paused');}else if(newState.data==YT.PlayerState.BUFFERING){heap.track('Video Buffering');}else if(newState.data==YT.PlayerState.CUED){heap.track('Video Cued');}}};(function($){jQuery.fn.fancySlider=function(arg){var options=$.extend({},$.fn.fancySlider.defaults,arg);var $elem,$projects,$mainWrapper,$projectList,$nav,$projectNav,previewWidth,listItemWidth,totalListWidth,slideInt,isMobile,innerProjectCounter=0,startX=0,tempX=0,projectShowing=false,currentProjectItem=null,currentProject=null,currentListPosX=0,containingProjects=[];function _init(elem){$elem=$(elem);$projects=$elem.children('div').remove();isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);options.screenButton=!options.screenButton?false:!options.infiniteSlide;$elem.addClass('fps-container').css({width:options.width,height:options.height}).append('<div class="fps-main-wrapper"></div>').children('.fps-main-wrapper').append('<ul class="fps-project-list"></ul>').append('<div class="fps-project-navigation fps-clearfix"><span class="fps-close-project"></span></div>');previewWidth=$elem.width()<480?$elem.width():$elem.width()/options.numOfPreviews;totalListWidth=previewWidth*$projects.length;$mainWrapper=$elem.children('.fps-main-wrapper');$projectList=$mainWrapper.children('.fps-project-list');$nav=$mainWrapper.children('.fps-navigation');$projectNav=$mainWrapper.children('.fps-project-navigation');if(options.enableDragging){$projectList.addClass('fps-drag-active');}
$projects.each(function(i,item){var $item=$(item),$lastItem=$projectList.append('<li style="width: '+previewWidth+'px; left: '+(previewWidth*i)+'px;" data-index="'+i+'"><div class="fps-media-container"></div><div class="fps-list-overlay" style="background-color: '+options.overlayColor+';"></div><h1 style="color: '+options.titleColor+';">'+item.title+'</h1><div class="fps-project-description" style="width: '+options.descriptionWidth+'px; height: '+options.descriptionHeight+'px;"></div><div class="fps-video-play"></div><div class="fps-preloader"></div></li>').children('li:last');_addMedia($lastItem,$item.data('media'),$item.data('image'));if($elem.width()<480){$lastItem.children('.fps-project-description').html($item.children('blockquote').html());}
$lastItem.hammer({prevent_default:true,drag_vertical:false}).on('tap',function(){if(projectShowing||$projectList.is(':animated')||$elem.width()<480){return false;}
_stopInterval();var $this=$(this),$project=$($projects.get(parseInt($this.data('index'))));currentProjectItem=$this;function getCopy(){containingProjects.push({media:$project.data('media'),image:$project.data('image'),title:$project.attr('title'),description:$project.children('blockquote').html(),textAlignment:$project.data('textalignment'),link:$project.data('link'),type:_getFileType($project.data('media')),useOneTitle:$project.data('useonetitle'),useOneDescription:$project.data('useonedescription')});currentProject=containingProjects[0];}
projectShowing=true;currentListPosX=$projectList.position().left;getCopy();$nav.animate({left:options.arrows?-($nav.children(':first').width()*2):0},300);currentProjectItem.addClass('fps-active-project').css('z-index',1).animate({width:'100%'},500).children('.fps-media-container').children('img').animate({left:0},500);currentProjectItem.children('.fps-list-overlay').hide();$projectList.removeClass('fps-drag-active').animate({left:-(currentProjectItem.position().left)},500,function(){$projectNav.animate({top:0},300);});_setProjectText(currentProjectItem,currentProject.title,currentProject.description,currentProject.textAlignment,currentProject.link);}).hover(function(){if(!projectShowing){$(this).children('.fps-list-overlay').stop().fadeTo(500,0);}},function(){if(!projectShowing){$(this).children('.fps-list-overlay').stop().fadeTo(200,0.5);}}).children('.fps-list-overlay').fadeTo(0,0.5);});options.onCoverflowReady.call();$projectNav.children('.fps-close-project').click(function(){var $mediaContainer=currentProjectItem.children('.fps-media-container');$projectNav.animate({top:-60},200).children('.fps-subproject-counter').hide();$mediaContainer.animate({left:0},innerProjectCounter===0?0:300,function(){currentProjectItem.removeClass('fps-active-project').animate({width:previewWidth},300);$mediaContainer.css('left',0).children('img:first').animate({left:$mediaContainer.children('img:first').data('leftpos')},300);$nav.animate({left:0},300);currentProjectItem.children('h1').text(containingProjects[0].title).animate({'marginLeft':0,left:0,width:'100%'},300);currentProjectItem.children('.fps-list-overlay').css('z-index',0).fadeTo(300,0.5);currentProjectItem.children('.fps-project-description').animate({bottom:-(currentProjectItem.children('.fps-project-description').outerHeight())},300,function(){$(this).hide();});if($projectList.position().left<$elem.width()-totalListWidth&&!options.infiniteSlide){currentListPosX=$elem.width()-totalListWidth;}
$projectList.animate({left:currentListPosX},300,function(){currentProjectItem.children('.fps-media-container').children('img:not(:first)').remove();currentProjectItem.css('z-index',0);if(options.enableDragging){$projectList.addClass('fps-drag-active');}
currentProjectItem=null;projectShowing=false;containingProjects=[];innerProjectCounter=0;_startInterval();});});});$(window).bind('resize',function(evt){if(currentProjectItem){var $mediaContainer=currentProjectItem.children('.fps-media-container'),$title=currentProjectItem.children('h1'),$description=currentProjectItem.children('.fps-project-description');$mediaContainer.css('left',-(innerProjectCounter*$elem.width())).children('img').each(function(i,item){$(item).css('left',(i*$elem.width()));});if($title.data('alignment')=='right'){var textDimension=$.textMetrics($title.get(0));$title.css('left',$elem.width()-(options.textOffsetToBorder+textDimension.width));}
if($description.data('alignment')=='right'){var descriptionWidth=options.descriptionWidth+parseInt($description.css('paddingLeft'))+parseInt($description.css('paddingRight'));$description.css('left',$elem.width()-(options.textOffsetToBorder+descriptionWidth));}}
if(!projectShowing){if($projectList.position().left<$elem.width()-totalListWidth){$projectList.css('left',$elem.width()-totalListWidth);}}});if(totalListWidth>$elem.width()){$projectList.hammer({prevent_default:true,hold_timeout:0,drag_vertical:false}).on('dragstart',function(evt){if(projectShowing||!options.enableDragging){return false;}
startX=$projectList.position().left;}).on("drag",function(evt){if(projectShowing||!options.enableDragging){return false;}
var moveX=0,gesture=evt.gesture;if(gesture.direction=='left'){moveX=0-gesture.distance;}else if(gesture.direction=='right'){moveX=gesture.distance;}
moveX=moveX+startX;if(!options.infiniteSlide){if(moveX>100){moveX=100;}else if(moveX<-(totalListWidth-$elem.width()+100)){moveX=-(totalListWidth-$elem.width()+100);}}
var slideDirectionInt=Math.ceil(moveX/previewWidth);if(tempX!=slideDirectionInt){if(tempX>slideDirectionInt){_infiniteChaining(true);}
else{_infiniteChaining(false);}
tempX=slideDirectionInt;}
$projectList.css({left:moveX});}).on('release',function(evt){if(projectShowing||!options.enableDragging){return false;}
_dock();});if(options.arrows){$nav.prepend('<span class="fps-previous-button"></span><span class="fps-next-button"></span>').children('.fps-previous-button, .fps-next-button').click(function(){_stopInterval();_startInterval();$(this).hasClass('fps-previous-button')?_slide('right'):_slide('left');});}}
if(options.screenButton&&!isMobile&&!/MSIE (\d+\.\d+);/.test(navigator.userAgent)){$(document).bind('fullscreenchange mozfullscreenchange webkitfullscreenchange',function(evt){var $screenBtn=$nav.children('.fps-screen-button');if(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen){$elem.addClass('fps-fullscreen-mode');$screenBtn.removeClass('fps-fullscreen').addClass('fps-normalscreen');}
else{$elem.removeClass('fps-fullscreen-mode');$screenBtn.removeClass('fps-normalscreen').addClass('fps-fullscreen');}});}
if($elem.width()<480){}}
function _slide(direction){if($projectList.is(':animated')){return false;}
var listLength=$projectList.children('li').size();if(typeof(direction)==='undefined')direction='left';if(direction=='left'){if(Math.abs($projectList.position().left)<totalListWidth-$elem.width()||options.infiniteSlide){$projectList.animate({left:'-='+previewWidth},500,function(){_infiniteChaining(true);});}}
else{if($projectList.position().left!==0||options.infiniteSlide){_infiniteChaining(false);$projectList.animate({left:'+='+previewWidth},500);}}}
function _dock(){if($projectList.position().left<$elem.width()-totalListWidth&&!options.infiniteSlide){$projectList.animate({left:$elem.width()-totalListWidth});}
else{var index=Math.round($projectList.position().left/previewWidth);$projectList.animate({left:index*previewWidth});}}
function _startInterval(){if(options.slideTime&&slideInt===undefined&&!projectShowing){slideInt=setInterval(_slide,options.slideTime);}}
function _stopInterval(){if(options.slideTime&&slideInt!==undefined){clearInterval(slideInt);slideInt=undefined;}}
function _infiniteChaining(append){if(!options.infiniteSlide){return false;}
if(append){var newLeftPos=$projectList.children('li:last').position().left;$projectList.children('li:last').after($projectList.children('li:first').css('left',newLeftPos+previewWidth));}
else{var newLeftPos=$projectList.children('li:first').position().left;$projectList.children('li:first').before($projectList.children('li:last').css('left',newLeftPos-previewWidth));}}
function _addMedia(listItem,mediaSrc,imageSrc){var $mediaContainer=listItem.children('.fps-media-container'),fileType=_getFileType(mediaSrc);listItem.children('.fps-preloader').fadeIn(100);if(fileType=='image'){_loadImage(mediaSrc,$mediaContainer);}
else if(imageSrc&&imageSrc.length>0){_loadImage(imageSrc,$mediaContainer);}}
function _loadImage(source,mediaContainer){var imgSize=mediaContainer.children('img').size();var loadImg=document.createElement("img");loadImg.style.left=imgSize*$elem.width()+'px';loadImg.style.display=imgSize===0?'none':'inline';loadImg.src=source;loadImg.onload=function(){mediaContainer.append(loadImg);if(mediaContainer.children('img').size()==1){var $img=mediaContainer.children('img:first'),leftPos=$img<=previewWidth?0:-($img.width()*0.5-previewWidth*0.5);mediaContainer.children('img:first').css('left',leftPos).fadeIn(500).data('leftpos',leftPos);}
else{_setProjectText(currentProjectItem,currentProject.title,currentProject.description,currentProject.textAlignment,currentProject.link);$projectNav.children('.fps-subproject-counter').text((innerProjectCounter+1)+'/'+containingProjects.length);mediaContainer.animate({left:'-='+$elem.width()},500,_checkForVideo);mediaContainer.parent().children('.fps-list-overlay').fadeOut(0);}
mediaContainer.parent().children('.fps-preloader').hide();};}
function _setProjectText($pi,title,description,textAlignment,link){if(title&&title.length>0&&(innerProjectCounter===0||!containingProjects[0].useOneTitle)){var $title=$pi.children('h1').text(title),textDimension=$.textMetrics($title.get(0));$title.data('alignment',textAlignment).css('width','auto');if(textAlignment=='right'){$title.animate({left:$elem.width()-(options.textOffsetToBorder+textDimension.width),'marginLeft':0,top:options.textOffsetToBorder},300);}
else if(textAlignment=='center'){$title.animate({left:'50%','marginLeft':-(textDimension.width*0.5),top:options.textOffsetToBorder},300);}
else{$title.animate({left:options.textOffsetToBorder,'marginLeft':0,top:options.textOffsetToBorder},300);}}
$description=$pi.children('.fps-project-description');if(description&&description.length>0&&(innerProjectCounter===0||!containingProjects[0].useOneDescription)){$description.data('alignment',textAlignment).html(description).show();var descriptionWidth=options.descriptionWidth+parseInt($description.css('paddingLeft'))+parseInt($description.css('paddingRight'));if(textAlignment=='right'){$description.animate({left:$elem.width()-(options.textOffsetToBorder+descriptionWidth),'marginLeft':0,bottom:0},300);}
else if(textAlignment=='center'){$description.animate({left:'50%','marginLeft':-(descriptionWidth*0.5),bottom:0},300);}
else{$description.animate({left:options.textOffsetToBorder,'marginLeft':0,bottom:0},300);}}
else if(!containingProjects[0].useOneDescription){$description.animate({bottom:-($description.outerHeight())},300);}}
function _getFileType(media){if(media.match(/youtube\.com\/watch/i)||media.match(/youtu\.be/i)){return'youtube';}else if(media.match(/\.(gif|jpg|jpeg|png)$/i)){return'image';}}
function _getParam(url,key){key=key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+key+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return(results===null)?"":results[1];}
return this.each(function(){_init(this);});};$.fn.fancySlider.defaults={width:940,height:600,numOfPreviews:7,textOffsetToBorder:60,descriptionWidth:400,descriptionHeight:"auto",slideTime:0,overlayColor:'#000000',titleColor:'#ffffff',scrollbarBackground:'#ffffff',scrollbarCursorColor:'#333333',screenButton:true,infiniteSlide:false,enableDragging:true,arrows:true,mp4Parameters:{enableKeyboard:true,skin:'yellow'},onCoverflowReady:function(){},onProjectShow:function(){}};})(jQuery);(function($){$.textMetrics=function(el){var h=0,w=0;var div=document.createElement('div');document.body.appendChild(div);$(div).css({position:'absolute',left:-1000,top:-1000,display:'none'});$(div).html($(el).html());var styles=['font-size','font-style','font-weight','font-family','line-height','text-transform','letter-spacing'];$(styles).each(function(){var s=this.toString();$(div).css(s,$(el).css(s));});h=$(div).outerHeight();w=$(div).outerWidth();$(div).remove();var ret={height:h,width:w};return ret;};})(jQuery);/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this),function(t,e){"use strict";t!==e&&(Hammer.event.bindDom=function(n,i,r){t(n).on(i,function(t){var n=t.originalEvent||t;n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n.target||(n.target=t.target),n.which===e&&(n.which=n.button),n.preventDefault||(n.preventDefault=t.preventDefault),n.stopPropagation||(n.stopPropagation=t.stopPropagation),r.call(this,n)})},Hammer.Instance.prototype.on=function(e,n){return t(this.element).on(e,n)},Hammer.Instance.prototype.off=function(e,n){return t(this.element).off(e,n)},Hammer.Instance.prototype.trigger=function(e,n){var i=t(this.element);return i.has(n.target).length&&(i=t(n.target)),i.trigger({type:e,gesture:n})},t.fn.hammer=function(e){return this.each(function(){var n=t(this),i=n.data("hammer");i?i&&e&&Hammer.utils.extend(i.options,e):n.data("hammer",new Hammer(this,e||{}))})})}(window.jQuery||window.Zepto);;